<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="https://Dobbymin.github.io/_next/static/media/3703c28dcda155b1-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="https://Dobbymin.github.io/_next/static/media/4cf2300e9c8272f7-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="https://Dobbymin.github.io/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="https://Dobbymin.github.io/_next/static/media/dbd4bef41e4e627e-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="https://Dobbymin.github.io/_next/static/media/ff840cfebfb63b0c-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="https://Dobbymin.github.io/_next/static/css/57434157e874fcc7.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="https://Dobbymin.github.io/_next/static/chunks/webpack-4b24c5cd000e9592.js"/><script src="https://Dobbymin.github.io/_next/static/chunks/96e220d1-c293b79da622100b.js" async=""></script><script src="https://Dobbymin.github.io/_next/static/chunks/770-ee777575a37210f3.js" async=""></script><script src="https://Dobbymin.github.io/_next/static/chunks/main-app-bd4810732eead7c1.js" async=""></script><script src="https://Dobbymin.github.io/_next/static/chunks/272-3a16f3f06ee953eb.js" async=""></script><script src="https://Dobbymin.github.io/_next/static/chunks/83-22b92d4537e44d01.js" async=""></script><script src="https://Dobbymin.github.io/_next/static/chunks/app/post/%5Bid%5D/page-71514de3ce6ea85d.js" async=""></script><meta name="next-size-adjust" content=""/><title>Dobby is Free</title><meta name="description" content="김도비의 개발 블로그 - 프론트엔드 개발, 웹 기술, 그리고 일상의 기록"/><link rel="author" href="https://github.com/Dobbymin"/><meta name="author" content="김도비"/><meta name="keywords" content="개발 블로그,프론트엔드,Next.js,React,TypeScript,김도비,Dobby"/><meta name="creator" content="김도비"/><meta name="publisher" content="김도비"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><meta property="og:title" content="Dobby is Free"/><meta property="og:description" content="김도비의 개발 블로그 - 프론트엔드 개발, 웹 기술, 그리고 일상의 기록"/><meta property="og:url" content="https://dobbymin.github.io"/><meta property="og:site_name" content="Dobby is Free"/><meta property="og:locale" content="ko_KR"/><meta property="og:image" content="https://dobbymin.github.io/logo.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:alt" content="Dobby is Free Logo"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Dobby is Free"/><meta name="twitter:description" content="김도비의 개발 블로그 - 프론트엔드 개발, 웹 기술, 그리고 일상의 기록"/><meta name="twitter:image" content="https://dobbymin.github.io/logo.png"/><link rel="shortcut icon" href="/logo.png"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="256x256"/><link rel="icon" href="/logo.png"/><link rel="apple-touch-icon" href="/logo.png"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="https://Dobbymin.github.io/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_275e91 __variable_63407e __variable_670af1 __variable_6dcb0b __variable_40c4eb antialiased"><div class="w-full bg-blog-gray-100"><header class="fixed top-0 right-0 left-0 z-100 flex items-center justify-center bg-blog-gray-500 transition-colors"><div class="relative flex h-header w-full max-w-7xl items-center justify-between px-4 md:px-8"><a href="/"><div class="flex items-center gap-4"><img alt="Dobblog Logo" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" class="rounded-full" style="color:transparent" src="/logo.png"/><p class="hidden font-lemon text-xl md:block md:text-3xl">Dobblog</p></div></a><div class="absolute top-1/2 left-1/2 hidden w-[400px] max-w-[60vw] -translate-x-1/2 -translate-y-1/2 items-center justify-center gap-3 rounded-sm bg-blog-gray-100 md:flex"><input class="flex h-9 w-full min-w-0 rounded-md border border-input px-3 py-1 transition-[color,box-shadow] selection:bg-primary selection:text-primary-foreground file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:bg-input/30 focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 border-none bg-transparent text-sm text-blog-gray-500 shadow-none outline-none placeholder:text-blog-gray-400 focus:border-none focus:ring-0 focus:outline-none" data-slot="input" type="text"/><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search mr-3 text-blog-gray-500" aria-hidden="true"><path d="m21 21-4.34-4.34"></path><circle cx="11" cy="11" r="8"></circle></svg></div><div class="flex items-center justify-between gap-3 md:gap-5"><a href="/about"><p class="font-lemon text-base md:text-xl">About</p></a><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun cursor-pointer text-blog-pink" aria-hidden="true"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg></div></div></header><main class="pt-16"><div class="flex min-h-[calc(100vh-4rem)] flex-col"><div class="mb-16 flex-grow"><div class="flex w-full items-center justify-center"><div class="flex w-full max-w-4xl flex-col gap-4"><header class="w-full bg-white p-6 md:p-8"><div class="flex flex-col gap-4"><div class="text-sm font-bold text-blog-green">Project</div><h1 class="text-2xl font-bold text-blog-black md:text-4xl">Serverless 배포 방식의 한계</h1><p class="text-sm text-blog-gray-600 md:text-base">Serverless 배포 방식인 vercel를 활용했을때 발생하는 문제점을 알아보자!</p><div class="flex items-center gap-2 pt-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-days size-5 text-blog-gray-600" aria-hidden="true"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path><path d="M8 14h.01"></path><path d="M12 14h.01"></path><path d="M16 14h.01"></path><path d="M8 18h.01"></path><path d="M12 18h.01"></path><path d="M16 18h.01"></path></svg><time class="text-sm font-medium text-blog-gray-600">2025-11-21</time></div></div></header><article class="w-full bg-white p-4 md:p-8"><div class="prose prose-lg w-full max-w-none"><p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">비트코인 모의 매매 서비스인 &quot;Dobbit&quot;를 만들면서 서버 관련 배포방식에대해 고민이 많았다. 물론 내가 Upbit Open API에 대해 이해를 잘못해서 &#x27;일단 돌아가시잖아~&#x27; 로 개발을 진행했는데, <strong class="font-bold text-blog-blue">사용자가 많아졌을 때 무조건 문제가 발생할 수 밖에 없는 방식</strong> 이기 때문에 문제를 개선해야겠다는 생각이 들었다.</p>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base"><img alt="img2" loading="lazy" width="600" height="600" decoding="async" data-nimg="1" class="mx-auto mb-4 h-auto rounded-lg" style="color:transparent" src="/images/express-vercel/2.png"/></p>
<h1 class="mb-6 border-b-2 border-blog-gray-400 pt-4 pb-3 text-2xl font-bold text-blog-black md:text-4xl">기존 개발 방식의 문제점</h1>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">Dobbit는 <strong class="font-bold text-blog-blue">비트코인 관련 정보를 실시간</strong> 으로 받아와야한다. 그렇기 때문에 &#x27;WebSocket&#x27; 을 활용해야한다는 생각이 들었지만, 여러가지 방법을 찾아보니까 WebSocket을 사용할 때는 서버를 직접 AWS EC2와 같은 방법으로 배포해야한다고 한다. 물론 서버를 개발한다면 Express 로 진행할 예정이기 때문에 Vercel을 활용해서 배포할 수 있지만, Vercel은 Serverless 방식이기 때문에 여러가지 제약이 많다고 한다.</p>
<h2 class="mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl">서버에 대한 잘못된 생각</h2>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">처음에는 내가 직접 Websocket 서버를 개발하고, client랑 연결해야한다고 생각했다. 아직까지 Express 로 서버를 개발하는데에는 많이 부족하다고 생각해서 거부감을 가지고 있다. 그래서 일단 서버를 따로 만들지 말고, 다른 방식을 찾아보았다.</p>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">아직 DB에 대한 이해도가 매우 부족하기 때문에 DB는 PostgreSQL 을 활용하는 Supabase 를 활용하기로 했다. 지금 인프런에서 수강하고 있는 강의에서 Supabase를 활용방법에 대해 배우고 있었기 때문에 이 강의를 활용해서 충분히 이용할 수 있다고 생각했다. 추가적으로 Supabase MCP 서버롤 활용하고, Copilot을 활용한다면 DB 관련 부분은 충분이 커버할 수 있다는 생각이 들었다. 그러던 중 Supabase 의 Realtime 기능에 대해서 알게되었다. 아직 자세한 방식은 잘 모르지만, 마치 WebSocket 과 비슷한 방식으로 실시간 통신이 가능하다고 한다. 그래서 로그인 관련 부분과, DB 관련 부분, 코인 관련 실시간 정보를 Supabase를 활용해서 진행해보았다.</p>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">이렇게 기능 구현을 할때까지 나는 WebSocket 서버를 따로 만들지 않고, Supabase와 Realtime 기능을 활용해서 완벽하게 대체했다고 생각했다. 그리고 Next.js를 vercel 로 배포해서 서비스 배포까지 완료했다. 하지만 이해가 안되는 코드 몇개가 있었다. 아직 Realtime 기능에 대한 이해가 부족하다 보니 Data를 Next.js의 서버에서 Supabase로부터 가져오고, Route Handler 를 사용해서 클라이언트로 호출하는 방식을 사용했다. 이때 React Query의 polling 기능을 활용해서 1초마다 데이터를 가져올 수 있게 기능구현을 진행해보았다.</p>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">아직까지도 이 방식이 잘 구현한건지, 잘못 구현한건지 잘 모르겠다. 하지만 확실한건 사용자가 많아져서 API 요청을 많이 보내게 된다면, 분명히 문제가 발생할 것이라고 생각했다. 그러던 중 Upbit Open API 문서를 다시 읽어보았다.</p>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base"><a class="hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base" href="https://docs.upbit.com/kr/docs/websocket-best-practice" rel="noopener noreferrer" target="_blank">Upbit Open API 문서</a></p>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base"><img alt="Upbit Open API 문서 캡처" loading="lazy" width="600" height="600" decoding="async" data-nimg="1" class="mx-auto mb-4 h-auto rounded-lg" style="color:transparent" src="/images/express-vercel/1.png"/></p>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">이미 만들어져 있는 WebSocket 서버를 이용할 수 있다는 것이었다!!!!!! 이미 어느정도 기능 구현이 되어있기 때문에 전부 수정하기는 힘들 것 같기때문에 일단 supabase에서 벗어나 직접 DB를 구축하는 방법으로 변경해볼 예정이다.</p>
<h1 class="mb-6 border-b-2 border-blog-gray-400 pt-4 pb-3 text-2xl font-bold text-blog-black md:text-4xl">Vercel 배포의 한계</h1>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">일단 전체적으로 리팩토링을 진행하기에 앞서, Vercel의 배포방식에 대해 알아볼려고 한다. 보통 서버를 구축할때 Express 로 개발을 진행하기 때문에 무료로 배포할 수 있는 Vercel를 활용한다면 뭐든지 만들수 있다고 생각했다. 심지어 지금은 Copilot과 Gemini 도 활용할 수 있기 때문에 쉽게 서버를 만들고 배포해서 이용할 수 있다고 생각했다. 하지만 Vercel은 Serverless 방식이기 때문에 여러가지 문제점이 발생할 수 있다는 점을 인지하게 되었다.</p>
<blockquote class="my-4 border-l-4 border-blog-green bg-blog-gray-100 py-5 pr-6 pl-4 text-sm text-blog-black md:text-base [&amp;&gt;:last-child]:mb-0">
<ol class="mb-4 list-inside list-decimal space-y-2 text-sm text-blog-black md:text-base">
<li class="ml-4">Cold Start 로 인한 응답 지연</li>
<li class="ml-4">상태 유지의 어려움</li>
<li class="ml-4">메모리 및 시간 제한</li>
</ol>
</blockquote>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">이 세가지 문제점에 대해 조금 더 알아보도록 하자.</p>
<h2 class="mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl">Serverless?</h2>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">먼저, 서버리스란 서버가 없다는 것이 아니라 <strong class="font-bold text-blog-blue">개발자가 서버를 관리할 필요 없이</strong> 애플리케이션을 빌드하고 실행할 수 있게 해준다. 24시간 내내 돌아가는 것이 아니라 <strong class="font-bold text-blog-blue">수면상태에 있다가 요청이 들어오면 잠들어 있는 함수를 깨우고 실행시켜 요청한 작업을 수행</strong> 하게 된다.</p>
<h2 class="mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl">Function as as a Service (FaaS)</h2>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">Vercel은 내부적으로 AWS Lambda와 비슷한 FaaS 모델을 사용한다.</p>
<ul class="mb-4 list-inside list-disc space-y-2 text-sm text-blog-black md:text-base">
<li class="ml-4"><strong class="font-bold text-blog-blue">Event-Driven</strong> (이벤트 기반): 평소에 서버는 꺼져있다가, 클라이언트의 HTTP 요청 (Event) 이 들어오는 순간에만 실행된다.</li>
<li class="ml-4"><strong class="font-bold text-blog-blue">Ephemeral</strong> (일회성): 동결 처리가 끝나면 일정 시간 후 컨테이너는 동결(Freeze) 되거나 파기(Destroy) 된다. 따라서 함수가 실행되는 동안에만 상태를 유지할 수 있다.</li>
<li class="ml-4"><strong class="font-bold text-blog-blue">Stateless</strong> (무상태): 각 함수 호출은 독립적이며, 이전 호출의 상태나 세션 정보를 저장하지 않는다. 이는 함수가 독립적이고, 예측가능한 동작을 유지하도록 돕는다.</li>
</ul>
<h2 class="mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl">Cold Start</h2>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base"><strong class="font-bold text-blog-blue">Cold Start</strong> 란 서버 리소스가 할당되지 않은 상태(Idle)에서 요청이 들어왔을 때, 새로운 실행 환경(Container)을 준비하고 코드를 실행 가능한 상태로 만드는 데 걸리는 초기 지연 시간을 의미한다.</p>
<h2 class="mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl">Express 서버가 Cold Start에 취약한 이유</h2>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">Vercel의 Serverless Function은 본래 &quot;하나의 함수가 하나의 기능&quot;을 하도록 설계되어있다. 하지만 Express를 Vercel에 배포한다는 것은 거대한 앱 전체를 하나의 함수 안에 구겨 넣는 것과 같다.</p>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">이 구조가 Cold Start 시간을 늘리는 기술적 원인은 다음과 같다.</p>
<h3 class="mt-6 mb-3 text-lg font-semibold text-blog-black md:text-2xl">1. 무거운 초기화 (Heavy Initialization)</h3>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">Express는 실행 시 라우팅 테이블 등록, 미들웨어 설정, DB 연결 설정 등 전역적인 초기화 작업이 필요하다. Cold Start가 발생할 때마다 이 모든 과정이 처음부터 다시 수행되어야 하므로, 단순한 함수보다 부팅 시간이 훨씬 길다.</p>
<h3 class="mt-6 mb-3 text-lg font-semibold text-blog-black md:text-2xl">2. 큰 번들 사이즈 (Bundle Size)</h3>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">Cold Start의 &#x27;코드 다운로드&#x27; 단계는 파일 크기에 비례하여 시간이 걸린다. Express 프레임워크 자체와 관련된 수많은 의존성 패키지(<code class="rounded bg-blog-gray-200 px-2 py-1 font-mono text-xs text-blog-pink md:text-sm">node_modules</code>)들이 함께 번들링되므로, 함수 용량이 커져 로딩 속도가 저하된다.</p>
<h3 class="mt-6 mb-3 text-lg font-semibold text-blog-black md:text-2xl">3. DB 연결 오버헤드 (Connection Overhead)</h3>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">전통적인 서버는 DB 연결을 한 번 맺어두고 계속 재사용(Connection Pool)한다. 하지만 Serverless 환경에서는 Cold Start가 일어날 때마다 DB 핸드셰이크를 새로 맺어야 한다. 이는 상당한 네트워크 지연(Latency)을 유발한다.</p>
<h2 class="mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl">Cold Start 해결 및 최적화 방안</h2>
<ol class="mb-4 list-inside list-decimal space-y-2 text-sm text-blog-black md:text-base">
<li class="ml-4">
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">번들 최적화 (Tree Shaking)
사용하지 않는 코드를 제거하고, 거대한 라이브러리 사용을 지양하여 번들 크기를 줄인다. (예: lodash 전체 import 대신 필요한 함수만 import)</p>
</li>
<li class="ml-4">
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">DB 연결 관리 최적화
함수 외부(Global Scope)에 DB 연결 객체를 캐싱하여, Warm Start 시에는 재연결 없이 기존 연결을 재사용하도록 코드를 작성해야 한다.</p>
</li>
<li class="ml-4">
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">Edge Functions 활용
Node.js 런타임보다 훨씬 가벼운 V8 기반의 Edge Runtime을 사용하면 Cold Start를 거의 0에 가깝게 줄일 수 있다. (단, Express는 Edge Runtime에서 완벽하게 호환되지 않을 수 있음)</p>
</li>
<li class="ml-4">
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">Serverless에 맞는 아키텍처 변경
가능하다면 Express라는 거대 프레임워크 대신, Next.js의 Route Handlers를 사용하여 각 엔드포인트를 개별 함수로 분리하는 것이 Vercel 플랫폼 최적화 관점에서 가장 유리하다.</p>
</li>
</ol>
<h1 class="mb-6 border-b-2 border-blog-gray-400 pt-4 pb-3 text-2xl font-bold text-blog-black md:text-4xl">WebSocket 를 Vercel 로 배포하면 안되는 이유</h1>
<blockquote class="my-4 border-l-4 border-blog-green bg-blog-gray-100 py-5 pr-6 pl-4 text-sm text-blog-black md:text-base [&amp;&gt;:last-child]:mb-0">
<h3 class="mt-6 mb-3 text-lg font-semibold text-blog-black md:text-2xl">[공식문서]</h3>
<ul class="mb-4 list-inside list-disc space-y-2 text-sm text-blog-black md:text-base">
<li class="ml-4"><a class="hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base" href="https://vercel.com/guides/publish-and-subscribe-to-realtime-data-on-vercel" rel="noopener noreferrer" target="_blank">Publish and Subscribe to Realtime Data on Vercel</a></li>
<li class="ml-4"><a class="hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base" href="https://vercel.com/docs/limits#websockets" rel="noopener noreferrer" target="_blank">Vercel Docs - websockets</a></li>
</ul>
</blockquote>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">WebSocket은 지속적으로 연결을 유지 (구독) 해야한다. 하지만 Vercel의 Serverless 방식은 요청이 없으면 함수가 동결(Freeze) 되거나 파기(Destroy) 된다. 따라서 WebSocket 연결이 유지될 수 없기 때문에 WebSocket 서버를 Vercel로 배포하는 것은 적합하지 않다고 한다.</p>
<h2 class="mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl">정리</h2>
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base">간단한 CRUD 를 사용하는 서버라면 Vercel로 배포하는게 좋을것 같다. 하지만 지속적으로 연결을 유지해야하는 서버가 필요하다면 AWS EC2나 GCP를 이용하거나 Railway 와 같은 서비스를 활용해야할 것 같다. 또한 Next.js의 Route Handler를 잘 활용하는 방법도 좋은 방법일 것 같다.</p>
<h3 class="mt-6 mb-3 text-lg font-semibold text-blog-black md:text-2xl">참고자료</h3>
<ul class="mb-4 list-inside list-disc space-y-2 text-sm text-blog-black md:text-base">
<li class="ml-4">
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base"><a class="hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base" href="https://velog.io/@shagrat/%EC%84%9C%EB%B2%84%EB%A6%AC%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98Serverless-Architecture%EC%99%80-%EC%BD%9C%EB%93%9C-%EC%8A%A4%ED%83%80%ED%8A%B8Cold-Start" rel="noopener noreferrer" target="_blank">서버리스 아키텍처(Serverless Architecture)와 콜드 스타트(Cold Start)</a></p>
</li>
<li class="ml-4">
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base"><a class="hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base" href="https://sollogging.tistory.com/93#google_vignette" rel="noopener noreferrer" target="_blank">Vercel과 EC2 배포 시 무슨 차이가 있을까? (서버리스와 Cold Start)</a></p>
</li>
<li class="ml-4">
<p class="mb-4 text-sm leading-relaxed text-blog-black md:text-base"><a class="hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base" href="https://vercel.com/guides/how-can-i-improve-serverless-function-lambda-cold-start-performance-on-vercel" rel="noopener noreferrer" target="_blank">How can I improve function cold start performance on Vercel?</a></p>
</li>
</ul></div></article></div></div><!--$--><!--/$--><!--$--><!--/$--></div><footer class="flex h-footer w-full items-center justify-center bg-blog-gray-300 px-4"><div class="flex flex-col items-start justify-between gap-1"><p class="text-sm text-blog-gray-600 md:text-base">Copyright © 2025 <b>Dobbymin</b> All rights reserved.</p><div class="flex flex-wrap items-center justify-center gap-1 font-fira-code text-sm text-blog-gray-600 md:text-base"><span>gmin0701@knu.ac.kr</span><span class="font-bold">.</span><span class="hidden md:inline">+82-10-3095-7259</span><span class="hidden font-bold md:inline">.</span><a class="hover:font-bold hover:underline" href="https://github.com/Dobbymin">GitHub</a><span class="font-bold">.</span><a class="hover:font-bold hover:underline" href="https://www.linkedin.com/in/dobbymin/">LinkedIn</a></div></div></footer></div></main></div><section aria-label="Notifications alt+T" tabindex="-1" aria-live="polite" aria-relevant="additions text" aria-atomic="false"></section><script src="https://Dobbymin.github.io/_next/static/chunks/webpack-4b24c5cd000e9592.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[70,[\"272\",\"static/chunks/272-3a16f3f06ee953eb.js\",\"83\",\"static/chunks/83-22b92d4537e44d01.js\",\"457\",\"static/chunks/app/post/%5Bid%5D/page-71514de3ce6ea85d.js\"],\"\"]\n3:I[4299,[\"272\",\"static/chunks/272-3a16f3f06ee953eb.js\",\"83\",\"static/chunks/83-22b92d4537e44d01.js\",\"457\",\"static/chunks/app/post/%5Bid%5D/page-71514de3ce6ea85d.js\"],\"Image\"]\n4:I[831,[],\"\"]\n5:I[8307,[],\"\"]\n6:I[2310,[\"272\",\"static/chunks/272-3a16f3f06ee953eb.js\",\"83\",\"static/chunks/83-22b92d4537e44d01.js\",\"457\",\"static/chunks/app/post/%5Bid%5D/page-71514de3ce6ea85d.js\"],\"Toaster\"]\n8:I[9757,[],\"MetadataBoundary\"]\na:I[9757,[],\"OutletBoundary\"]\nd:I[8475,[],\"AsyncMetadataOutlet\"]\nf:I[9757,[],\"ViewportBoundary\"]\n11:I[8458,[],\"\"]\n:HL[\"https://Dobbymin.github.io/_next/static/media/3703c28dcda155b1-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"https://Dobbymin.github.io/_next/static/media/4cf2300e9c8272f7-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"https://Dobbymin.github.io/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"https://Dobbymin.github.io/_next/static/media/dbd4bef41e4e627e-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"https://Dobbymin.github.io/_next/static/media/ff840cfebfb63b0c-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"https://Dobbymin.github.io/_next/static/css/57434157e874fcc7.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"BkUX_u87N9kGNabozTU6p\",\"p\":\"https://Dobbymin.github.io\",\"c\":[\"\",\"post\",\"express-vercel\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"post\",{\"children\":[[\"id\",\"express-vercel\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://Dobbymin.github.io/_next/static/css/57434157e874fcc7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_275e91 __variable_63407e __variable_670af1 __variable_6dcb0b __variable_40c4eb antialiased\",\"children\":[[\"$\",\"div\",null,{\"className\":\"w-full bg-blog-gray-100\",\"children\":[[\"$\",\"header\",null,{\"className\":\"fixed top-0 right-0 left-0 z-100 flex items-center justify-center bg-blog-gray-500 transition-colors\",\"children\":[\"$\",\"div\",null,{\"className\":\"relative flex h-header w-full max-w-7xl items-center justify-between px-4 md:px-8\",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center gap-4\",\"children\":[[\"$\",\"$L3\",null,{\"alt\":\"Dobblog Logo\",\"className\":\"rounded-full\",\"height\":40,\"src\":\"/logo.png\",\"width\":40}],[\"$\",\"p\",null,{\"className\":\"hidden font-lemon text-xl md:block md:text-3xl\",\"children\":\"Dobblog\"}]]}]}],[\"$\",\"div\",null,{\"className\":\"absolute top-1/2 left-1/2 hidden w-[400px] max-w-[60vw] -translate-x-1/2 -translate-y-1/2 items-center justify-center gap-3 rounded-sm bg-blog-gray-100 md:flex\",\"children\":[[\"$\",\"input\",null,{\"className\":\"flex h-9 w-full min-w-0 rounded-md border border-input px-3 py-1 transition-[color,box-shadow] selection:bg-primary selection:text-primary-foreground file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:bg-input/30 focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 border-none bg-transparent text-sm text-blog-gray-500 shadow-none outline-none placeholder:text-blog-gray-400 focus:border-none focus:ring-0 focus:outline-none\",\"data-slot\":\"input\",\"type\":\"text\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":20,\"height\":20,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-search mr-3 text-blog-gray-500\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"14j7rj\",{\"d\":\"m21 21-4.34-4.34\"}],[\"$\",\"circle\",\"4ej97u\",{\"cx\":\"11\",\"cy\":\"11\",\"r\":\"8\"}],\"$undefined\"]}]]}],[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between gap-3 md:gap-5\",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/about\",\"children\":[\"$\",\"p\",null,{\"className\":\"font-lemon text-base md:text-xl\",\"children\":\"About\"}]}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":20,\"height\":20,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-sun cursor-pointer text-blog-pink\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"circle\",\"4exip2\",{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"4\"}],[\"$\",\"path\",\"tus03m\",{\"d\":\"M12 2v2\"}],[\"$\",\"path\",\"1lh1kg\",{\"d\":\"M12 20v2\"}],[\"$\",\"path\",\"149t6j\",{\"d\":\"m4.93 4.93 1.41 1.41\"}],[\"$\",\"path\",\"ptbguv\",{\"d\":\"m17.66 17.66 1.41 1.41\"}],[\"$\",\"path\",\"1t8f8n\",{\"d\":\"M2 12h2\"}],[\"$\",\"path\",\"1q8mjw\",{\"d\":\"M20 12h2\"}],[\"$\",\"path\",\"1m8zz5\",{\"d\":\"m6.34 17.66-1.41 1.41\"}],[\"$\",\"path\",\"1shlcs\",{\"d\":\"m19.07 4.93-1.41 1.41\"}],\"$undefined\"]}]]}]]}]}],[\"$\",\"main\",null,{\"className\":\"pt-16\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex min-h-[calc(100vh-4rem)] flex-col\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-16 flex-grow\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"flex h-footer w-full items-center justify-center bg-blog-gray-300 px-4\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-start justify-between gap-1\",\"children\":[[\"$\",\"p\",null,{\"className\":\"text-sm text-blog-gray-600 md:text-base\",\"children\":[\"Copyright © 2025 \",[\"$\",\"b\",null,{\"children\":\"Dobbymin\"}],\" All rights reserved.\"]}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap items-center justify-center gap-1 font-fira-code text-sm text-blog-gray-600 md:text-base\",\"children\":[[\"$\",\"span\",null,{\"children\":\"gmin0701@knu.ac.kr\"}],[\"$\",\"span\",null,{\"className\":\"font-bold\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"hidden md:inline\",\"children\":\"+82-10-3095-7259\"}],[\"$\",\"span\",null,{\"className\":\"hidden font-bold md:inline\",\"children\":\".\"}],[\"$\",\"$L2\",null,{\"className\":\"hover:font-bold hover:underline\",\"href\":\"https://github.com/Dobbymin\",\"children\":\"GitHub\"}],[\"$\",\"span\",null,{\"className\":\"font-bold\",\"children\":\".\"}],[\"$\",\"$L2\",null,{\"className\":\"hover:font-bold hover:underline\",\"href\":\"https://www.linkedin.com/in/dobbymin/\",\"children\":\"LinkedIn\"}]]}]]}]}]]}]}]]}],[\"$\",\"$L6\",null,{}]]}]}]]}],{\"children\":[\"post\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"id\",\"express-vercel\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L7\",[\"$\",\"$L8\",null,{\"children\":\"$L9\"}],null,[\"$\",\"$La\",null,{\"children\":[\"$Lb\",\"$Lc\",[\"$\",\"$Ld\",null,{\"promise\":\"$@e\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"MkmJMEAR-umn20OCDD5IE\",{\"children\":[[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$11\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"12:\"$Sreact.suspense\"\n13:I[8475,[],\"AsyncMetadata\"]\n9:[\"$\",\"$12\",null,{\"fallback\":null,\"children\":[\"$\",\"$L13\",null,{\"promise\":\"$@14\"}]}]\n7:[\"$\",\"div\",null,{\"className\":\"flex w-full items-center justify-center\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex w-full max-w-4xl flex-col gap-4\",\"children\":[[\"$\",\"header\",null,{\"className\":\"w-full bg-white p-6 md:p-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col gap-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-sm font-bold text-blog-green\",\"children\":\"Project\"}],[\"$\",\"h1\",null,{\"className\":\"text-2xl font-bold text-blog-black md:text-4xl\",\"children\":\"Serverless 배포 방식의 한계\"}],[\"$\",\"p\",null,{\"className\":\"text-sm text-blog-gray-600 md:text-base\",\"children\":\"Serverless 배포 방식인 vercel를 활용했을때 발생하는 문제점을 알아보자!\"}],[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2 pt-2\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-calendar-days size-5 text-blog-gray-600\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1cmpym\",{\"d\":\"M8 2v4\"}],[\"$\",\"path\",\"4m81vk\",{\"d\":\"M16 2v4\"}],[\"$\",\"rect\",\"1hopcy\",{\"width\":\"18\",\"height\":\"18\",\"x\":\"3\",\"y\":\"4\",\"rx\":\"2\"}],[\"$\",\"path\",\"8toen8\",{\"d\":\"M3 10h18\"}],[\"$\",\"path\",\"6423bh\",{\"d\":\"M8 14h.01\"}],[\"$\",\"path\",\"1etili\",{\"d\":\"M12 14h.01\"}],[\"$\",\"path\",\"1gbofw\",{\"d\":\"M16 14h.01\"}],[\"$\",\"path\",\"lrp35t\",{\"d\":\"M8 18h.01\"}],[\"$\",\"path\",\"mhygvu\",{\"d\":\"M12 18h.01\"}],[\"$\",\"path\",\"kzsmim\",{\"d\":\"M16 18h.01\"}],\"$undefined\"]}],[\"$\",\"time\",null,{\"className\":\"text-sm font-medium text-blog-gray-600\",\"children\":\"2025-11-21\"}]]}]]}]}],[\"$\",\"article\",null,{\"className\":\"w-full bg-white p-4 md:p-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"prose prose-lg w-full max-w-none\",\"children\":\"$L15\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"c:null\n"])</script><script>self.__next_f.push([1,"15:[[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":[\"비트코인 모의 매매 서비스인 \\\"Dobbit\\\"를 만들면서 서버 관련 배포방식에대해 고민이 많았다. 물론 내가 Upbit Open API에 대해 이해를 잘못해서 '일단 돌아가시잖아~' 로 개발을 진행했는데, \",[\"$\",\"strong\",null,{\"className\":\"font-bold text-blog-blue\",\"children\":\"사용자가 많아졌을 때 무조건 문제가 발생할 수 밖에 없는 방식\"}],\" 이기 때문에 문제를 개선해야겠다는 생각이 들었다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":[\"$\",\"$L3\",null,{\"src\":\"/images/express-vercel/2.png\",\"alt\":\"img2\",\"className\":\"mx-auto mb-4 h-auto rounded-lg\",\"height\":600,\"width\":600}]}],\"\\n\",[\"$\",\"h1\",null,{\"className\":\"mb-6 border-b-2 border-blog-gray-400 pt-4 pb-3 text-2xl font-bold text-blog-black md:text-4xl\",\"children\":\"기존 개발 방식의 문제점\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":[\"Dobbit는 \",[\"$\",\"strong\",null,{\"className\":\"font-bold text-blog-blue\",\"children\":\"비트코인 관련 정보를 실시간\"}],\" 으로 받아와야한다. 그렇기 때문에 'WebSocket' 을 활용해야한다는 생각이 들었지만, 여러가지 방법을 찾아보니까 WebSocket을 사용할 때는 서버를 직접 AWS EC2와 같은 방법으로 배포해야한다고 한다. 물론 서버를 개발한다면 Express 로 진행할 예정이기 때문에 Vercel을 활용해서 배포할 수 있지만, Vercel은 Serverless 방식이기 때문에 여러가지 제약이 많다고 한다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl\",\"children\":\"서버에 대한 잘못된 생각\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"처음에는 내가 직접 Websocket 서버를 개발하고, client랑 연결해야한다고 생각했다. 아직까지 Express 로 서버를 개발하는데에는 많이 부족하다고 생각해서 거부감을 가지고 있다. 그래서 일단 서버를 따로 만들지 말고, 다른 방식을 찾아보았다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"아직 DB에 대한 이해도가 매우 부족하기 때문에 DB는 PostgreSQL 을 활용하는 Supabase 를 활용하기로 했다. 지금 인프런에서 수강하고 있는 강의에서 Supabase를 활용방법에 대해 배우고 있었기 때문에 이 강의를 활용해서 충분히 이용할 수 있다고 생각했다. 추가적으로 Supabase MCP 서버롤 활용하고, Copilot을 활용한다면 DB 관련 부분은 충분이 커버할 수 있다는 생각이 들었다. 그러던 중 Supabase 의 Realtime 기능에 대해서 알게되었다. 아직 자세한 방식은 잘 모르지만, 마치 WebSocket 과 비슷한 방식으로 실시간 통신이 가능하다고 한다. 그래서 로그인 관련 부분과, DB 관련 부분, 코인 관련 실시간 정보를 Supabase를 활용해서 진행해보았다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"이렇게 기능 구현을 할때까지 나는 WebSocket 서버를 따로 만들지 않고, Supabase와 Realtime 기능을 활용해서 완벽하게 대체했다고 생각했다. 그리고 Next.js를 vercel 로 배포해서 서비스 배포까지 완료했다. 하지만 이해가 안되는 코드 몇개가 있었다. 아직 Realtime 기능에 대한 이해가 부족하다 보니 Data를 Next.js의 서버에서 Supabase로부터 가져오고, Route Handler 를 사용해서 클라이언트로 호출하는 방식을 사용했다. 이때 React Query의 polling 기능을 활용해서 1초마다 데이터를 가져올 수 있게 기능구현을 진행해보았다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"아직까지도 이 방식이 잘 구현한건지, 잘못 구현한건지 잘 모르겠다. 하지만 확실한건 사용자가 많아져서 API 요청을 많이 보내게 된다면, 분명히 문제가 발생할 것이라고 생각했다. 그러던 중 Upbit Open API 문서를 다시 읽어보았다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":[\"$\",\"a\",null,{\"className\":\"hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base\",\"href\":\"https://docs.upbit.com/kr/docs/websocket-best-practice\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"children\":\"Upbit Open API 문서\"}]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":[\"$\",\"$L3\",null,{\"src\":\"/images/express-vercel/1.png\",\"alt\":\"Upbit Open API 문서 캡처\",\"className\":\"mx-auto mb-4 h-auto rounded-lg\",\"height\":600,\"width\":600}]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"이미 만들어져 있는 WebSocket 서버를 이용할 수 있다는 것이었다!!!!!! 이미 어느정도 기능 구현이 되어있기 때문에 전부 수정하기는 힘들 것 같기때문에 일단 supabase에서 벗어나 직접 DB를 구축하는 방법으로 변경해볼 예정이다.\"}],\"\\n\",[\"$\",\"h1\",null,{\"className\":\"mb-6 border-b-2 border-blog-gray-400 pt-4 pb-3 text-2xl font-bold text-blog-black md:text-4xl\",\"children\":\"Vercel 배포의 한계\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"일단 전체적으로 리팩토링을 진행하기에 앞서, Vercel의 배포방식에 대해 알아볼려고 한다. 보통 서버를 구축할때 Express 로 개발을 진행하기 때문에 무료로 배포할 수 있는 Vercel를 활용한다면 뭐든지 만들수 있다고 생각했다. 심지어 지금은 Copilot과 Gemini 도 활용할 수 있기 때문에 쉽게 서버를 만들고 배포해서 이용할 수 있다고 생각했다. 하지만 Vercel은 Serverless 방식이기 때문에 여러가지 문제점이 발생할 수 있다는 점을 인지하게 되었다.\"}],\"\\n\",[\"$\",\"blockquote\",null,{\"className\":\"my-4 border-l-4 border-blog-green bg-blog-gray-100 py-5 pr-6 pl-4 text-sm text-blog-black md:text-base [\u0026\u003e:last-child]:mb-0\",\"children\":[\"\\n\",[\"$\",\"ol\",null,{\"className\":\"mb-4 list-inside list-decimal space-y-2 text-sm text-blog-black md:text-base\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":\"Cold Start 로 인한 응답 지연\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":\"상태 유지의 어려움\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":\"메모리 및 시간 제한\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"이 세가지 문제점에 대해 조금 더 알아보도록 하자.\"}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl\",\"children\":\"Serverless?\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":[\"먼저, 서버리스란 서버가 없다는 것이 아니라 \",[\"$\",\"strong\",null,{\"className\":\"font-bold text-blog-blue\",\"children\":\"개발자가 서버를 관리할 필요 없이\"}],\" 애플리케이션을 빌드하고 실행할 수 있게 해준다. 24시간 내내 돌아가는 것이 아니라 \",[\"$\",\"strong\",null,{\"className\":\"font-bold text-blog-blue\",\"children\":\"수면상태에 있다가 요청이 들어오면 잠들어 있는 함수를 깨우고 실행시켜 요청한 작업을 수행\"}],\" 하게 된다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl\",\"children\":\"Function as as a Service (FaaS)\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"Vercel은 내부적으로 AWS Lambda와 비슷한 FaaS 모델을 사용한다.\"}],\"\\n\",[\"$\",\"ul\",null,{\"className\":\"mb-4 list-inside list-disc space-y-2 text-sm text-blog-black md:text-base\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[[\"$\",\"strong\",null,{\"className\":\"font-bold text-blog-blue\",\"children\":\"Event-Driven\"}],\" (이벤트 기반): 평소에 서버는 꺼져있다가, 클라이언트의 HTTP 요청 (Event) 이 들어오는 순간에만 실행된다.\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[[\"$\",\"strong\",null,{\"className\":\"font-bold text-blog-blue\",\"children\":\"Ephemeral\"}],\" (일회성): 동결 처리가 끝나면 일정 시간 후 컨테이너는 동결(Freeze) 되거나 파기(Destroy) 된다. 따라서 함수가 실행되는 동안에만 상태를 유지할 수 있다.\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[[\"$\",\"strong\",null,{\"className\":\"font-bold text-blog-blue\",\"children\":\"Stateless\"}],\" (무상태): 각 함수 호출은 독립적이며, 이전 호출의 상태나 세션 정보를 저장하지 않는다. 이는 함수가 독립적이고, 예측가능한 동작을 유지하도록 돕는다.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl\",\"children\":\"Cold Start\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":[[\"$\",\"strong\",null,{\"className\":\"font-bold text-blog-blue\",\"children\":\"Cold Start\"}],\" 란 서버 리소스가 할당되지 않은 상태(Idle)에서 요청이 들어왔을 때, 새로운 실행 환경(Container)을 준비하고 코드를 실행 가능한 상태로 만드는 데 걸리는 초기 지연 시간을 의미한다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl\",\"children\":\"Express 서버가 Cold Start에 취약한 이유\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"Vercel의 Serverless Function은 본래 \\\"하나의 함수가 하나의 기능\\\"을 하도록 설계되어있다. 하지만 Express를 Vercel에 배포한다는 것은 거대한 앱 전체를 하나의 함수 안에 구겨 넣는 것과 같다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"이 구조가 Cold Start 시간을 늘리는 기술적 원인은 다음과 같다.\"}],\"\\n\",[\"$\",\"h3\",null,{\"className\":\"mt-6 mb-3 text-lg font-semibold text-blog-black md:text-2xl\",\"children\":\"1. 무거운 초기화 (Heavy Initialization)\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"Express는 실행 시 라우팅 테이블 등록, 미들웨어 설정, DB 연결 설정 등 전역적인 초기화 작업이 필요하다. Cold Start가 발생할 때마다 이 모든 과정이 처음부터 다시 수행되어야 하므로, 단순한 함수보다 부팅 시간이 훨씬 길다.\"}],\"\\n\",[\"$\",\"h3\",null,{\"className\":\"mt-6 mb-3 text-lg font-semibold text-blog-black md:text-2xl\",\"children\":\"2. 큰 번들 사이즈 (Bundle Size)\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":[\"Cold Start의 '코드 다운로드' 단계는 파일 크기에 비례하여 시간이 걸린다. Express 프레임워크 자체와 관련된 수많은 의존성 패키지(\",[\"$\",\"code\",null,{\"className\":\"rounded bg-blog-gray-200 px-2 py-1 font-mono text-xs text-blog-pink md:text-sm\",\"children\":\"node_modules\"}],\")들이 함께 번들링되므로, 함수 용량이 커져 로딩 속도가 저하된다.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"className\":\"mt-6 mb-3 text-lg font-semibold text-blog-black md:text-2xl\",\"children\":\"3. DB 연결 오버헤드 (Connection Overhead)\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"전통적인 서버는 DB 연결을 한 번 맺어두고 계속 재사용(Connection Pool)한다. 하지만 Serverless 환경에서는 Cold Start가 일어날 때마다 DB 핸드셰이크를 새로 맺어야 한다. 이는 상당한 네트워크 지연(Latency)을 유발한다.\"}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl\",\"children\":\"Cold Start 해결 및 최적화 방안\"}],\"\\n\",[\"$\",\"ol\",null,{\"className\":\"mb-4 list-inside list-decimal space-y-2 text-sm text-blog-black md:text-base\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"번들 최적화 (Tree Shaking)\\n사용하지 않는 코드를 제거하고, 거대한 라이브러리 사용을 지양하여 번들 크기를 줄인다. (예: lodash 전체 import 대신 필요한 함수만 import)\"}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"DB 연결 관리 최적화\\n함수 외부(Global Scope)에 DB 연결 객체를 캐싱하여, Warm Start 시에는 재연결 없이 기존 연결을 재사용하도록 코드를 작성해야 한다.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"Edge Functions 활용\\nNode.js 런타임보다 훨씬 가벼운 V8 기반의 Edge Runtime을 사용하면 Cold Start를 거의 0에 가깝게 줄일 수 있다. (단, Express는 Edge Runtime에서 완벽하게 호환되지 않을 수 있음)\"}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"Serverless에 맞는 아키텍처 변경\\n가능하다면 Express라는 거대 프레임워크 대신, Next.js의 Route Handlers를 사용하여 각 엔드포인트를 개별 함수로 분리하는 것이 Vercel 플랫폼 최적화 관점에서 가장 유리하다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h1\",null,{\"className\":\"mb-6 border-b-2 border-blog-gray-400 pt-4 pb-3 text-2xl font-bold text-blog-black md:text-4xl\",\"children\":\"WebSocket 를 Vercel 로 배포하면 안되는 이유\"}],\"\\n\",[\"$\",\"blockquote\",null,{\"className\":\"my-4 border-l-4 border-blog-green bg-blog-gray-100 py-5 pr-6 pl-4 text-sm text-blog-black md:text-base [\u0026\u003e:last-child]:mb-0\",\"children\":[\"\\n\",[\"$\",\"h3\",null,{\"className\":\"mt-6 mb-3 text-lg font-semibold text-blog-black md:text-2xl\",\"children\":\"[공식문서]\"}],\"\\n\",[\"$\",\"ul\",null,{\"className\":\"mb-4 list-inside list-disc space-y-2 text-sm text-blog-black md:text-base\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[\"$\",\"a\",null,{\"className\":\"hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base\",\"href\":\"https://vercel.com/guides/publish-and-subscribe-to-realtime-data-on-vercel\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"children\":\"Publish and Subscribe to Realtime Data on Vercel\"}]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[\"$\",\"a\",null,{\"className\":\"hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base\",\"href\":\"https://vercel.com/docs/limits#websockets\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"children\":\"Vercel Docs - websockets\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"WebSocket은 지속적으로 연결을 유지 (구독) 해야한다. 하지만 Vercel의 Serverless 방식은 요청이 없으면 함수가 동결(Freeze) 되거나 파기(Destroy) 된다. 따라서 WebSocket 연결이 유지될 수 없기 때문에 WebSocket 서버를 Vercel로 배포하는 것은 적합하지 않다고 한다.\"}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-8 mb-4 text-xl font-semibold text-blog-black md:text-3xl\",\"children\":\"정리\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":\"간단한 CRUD 를 사용하는 서버라면 Vercel로 배포하는게 좋을것 같다. 하지만 지속적으로 연결을 유지해야하는 서버가 필요하다면 AWS EC2나 GCP를 이용하거나 Railway 와 같은 서비스를 활용해야할 것 같다. 또한 Next.js의 Route Handler를 잘 활용하는 방법도 좋은 방법일 것 같다.\"}],\"\\n\",[\"$\",\"h3\",null,{\"className\":\"mt-6 mb-3 text-lg font-semibold text-blog-black md:text-2xl\",\"children\":\"참고자료\"}],\"\\n\",[\"$\",\"ul\",null,{\"className\":\"mb-4 list-inside list-disc space-y-2 text-sm text-blog-black md:text-base\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":[\"$\",\"a\",null,{\"className\":\"hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base\",\"href\":\"https://velog.io/@shagrat/%EC%84%9C%EB%B2%84%EB%A6%AC%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98Serverless-Architecture%EC%99%80-%EC%BD%9C%EB%93%9C-%EC%8A%A4%ED%83%80%ED%8A%B8Cold-Start\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"children\":\"서버리스 아키텍처(Serverless Architecture)와 콜드 스타트(Cold Start)\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":[\"$\",\"a\",null,{\"className\":\"hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base\",\"href\":\"https://sollogging.tistory.com/93#google_vignette\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"children\":\"Vercel과 EC2 배포 시 무슨 차이가 있을까? (서버리스와 Cold Start)\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"ml-4\",\"children\":[\"\\n\",[\"$\",\"p\",null,{\"className\":\"mb-4 text-sm leading-relaxed text-blog-black md:text-base\",\"children\":[\"$\",\"a\",null,{\"className\":\"hover:text-blog-purple text-sm text-blog-blue underline underline-offset-2 transition-all hover:underline-offset-4 md:text-base\",\"href\":\"https://vercel.com/guides/how-can-i-improve-serverless-function-lambda-cold-start-performance-on-vercel\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"children\":\"How can I improve function cold start performance on Vercel?\"}]}],\"\\n\"]}],\"\\n\"]}]]\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\nb:null\n"])</script><script>self.__next_f.push([1,"14:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Dobby is Free\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"김도비의 개발 블로그 - 프론트엔드 개발, 웹 기술, 그리고 일상의 기록\"}],[\"$\",\"link\",\"2\",{\"rel\":\"author\",\"href\":\"https://github.com/Dobbymin\"}],[\"$\",\"meta\",\"3\",{\"name\":\"author\",\"content\":\"김도비\"}],[\"$\",\"meta\",\"4\",{\"name\":\"keywords\",\"content\":\"개발 블로그,프론트엔드,Next.js,React,TypeScript,김도비,Dobby\"}],[\"$\",\"meta\",\"5\",{\"name\":\"creator\",\"content\":\"김도비\"}],[\"$\",\"meta\",\"6\",{\"name\":\"publisher\",\"content\":\"김도비\"}],[\"$\",\"meta\",\"7\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"8\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:title\",\"content\":\"Dobby is Free\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:description\",\"content\":\"김도비의 개발 블로그 - 프론트엔드 개발, 웹 기술, 그리고 일상의 기록\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:url\",\"content\":\"https://dobbymin.github.io\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:site_name\",\"content\":\"Dobby is Free\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:locale\",\"content\":\"ko_KR\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:image\",\"content\":\"https://dobbymin.github.io/logo.png\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"17\",{\"property\":\"og:image:alt\",\"content\":\"Dobby is Free Logo\"}],[\"$\",\"meta\",\"18\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:title\",\"content\":\"Dobby is Free\"}],[\"$\",\"meta\",\"21\",{\"name\":\"twitter:description\",\"content\":\"김도비의 개발 블로그 - 프론트엔드 개발, 웹 기술, 그리고 일상의 기록\"}],[\"$\",\"meta\",\"22\",{\"name\":\"twitter:image\",\"content\":\"https://dobbymin.github.io/logo.png\"}],[\"$\",\"link\",\"23\",{\"rel\":\"shortcut icon\",\"href\":\"/logo.png\"}],[\"$\",\"link\",\"24\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"256x256\"}],[\"$\",\"link\",\"25\",{\"rel\":\"icon\",\"href\":\"/logo.png\"}],[\"$\",\"link\",\"26\",{\"rel\":\"apple-touch-icon\",\"href\":\"/logo.png\"}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"e:{\"metadata\":\"$14:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>